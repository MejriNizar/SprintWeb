
{% extends 'base.html.twig' %}
{% block body %}
    <div class="text-center" style="margin-top: 20px">
        <h3>La liste de nos produits</h3>
    </div>
    <div class="row">
    <div class="container col-2 text-left"  style="margin-top: 20px;margin-right: 290px">
        <select class="custom-select" id="categorie">
            <option value="Bricollage">Bricolage</option>
            <option value="Jardinage">Jardinage</option>
            <option value="Plomberie">Plomberie</option>
            <option value="Batiment"> Batiment</option>
            <option selected="selected" value="all">All</option>
        </select >
    </div>
        <div class="col-md-3 " style="margin-right: 250px;margin-top: 20px">
            <label class="text-black" for="fname">Rechercher: </label>
            <input type="text" id="recherche" >
        </div>
    </div>
    <div class="site-section" size="1">

        <div id="produits" class="container">
            <div class="row">
                {% for p in produits %}
                <div class="col-md-6 col-lg-4 mb-4">
                    <a href="{{ path('produits_detailsproduit', {'idProduit': p.idProduit }) }}" class="unit-1 text-center">
                        <img src="{{asset('ressources/images/produit/'~p.image )}}"  alt="Image" class="img-fluid" width="300" height="300">
                        <div class="unit-1-text">
                            <h4 >{{ p.nom }}</h4>
                            <p class="px-5" style="margin-bottom: 80px" >{{ p.prix }} dt</p>


                        </div>
                    </a>
                </div>
                {% endfor %}

            </div>
        </div>
    </div>
    <script>
        $(document).ready(function(){
            $("#categorie").change(function(){
                if ($("#categorie").val() !="all") {
                    $("#produits").empty();
                    var content =  "<div class=\"row\">";
                    {% for p in produits %}
                    if ($("#categorie").val() =="{{ p.categorie }}")
                        content +="<div class=\"col-md-6 col-lg-4 mb-4\">\n" +
                            "                    <a href=\"#\" class=\"unit-1 text-center\">\n" +
                            "                        <img  width=\"300\" height=\"300\" src=\""+"{{ asset('ressources/images/produit/'~p.image ) }}"+"\"  alt=\"Image\" class=\"img-fluid\">\n" +
                            "                        <div class=\"unit-1-text\">\n" +
                            "                            <h4 >{{ p.nom }}"+"</h4>\n" +
                            "                            <p class=\"px-5\" style=\"margin-bottom: 80px\">"+"{{ p.prix }}"+"</p>\n" +
                            "                        </div>\n" +
                            "                    </a>\n" +
                            "                </div>"


                    {% endfor %}
                    content+="</div>";
                    $("#produits").append(content);
                }else {
                    $("#produits").empty();
                    var content =  "<div class=\"row\">";
                    {% for p in produits %}

                        content +="<div class=\"col-md-6 col-lg-4 mb-4\">\n" +
                            "                    <a href=\"#\" class=\"unit-1 text-center\">\n" +
                            "                        <img  width=\"300\" height=\"300\" src=\""+"{{ asset('ressources/images/produit/'~p.image ) }}"+"\"  alt=\"Image\" class=\"img-fluid\">\n" +
                            "                        <div class=\"unit-1-text\">\n" +
                            "                            <h3 class=\"unit-1-heading\">"+"{{ p.nom }}"+"</h3>\n" +
                            "                            <p class=\"px-5\" style=\"margin-bottom: 80px\">"+"{{ p.prix }}"+"</p>\n" +

                            "                        </div>\n" +
                            "                    </a>\n" +
                            "                </div>"

                    {% endfor %}
                    content+="</div>";
                    $("#produits").append(content);
                }




            });
            $("#recherche").keyup(function(){
                if ($("#recherche").val() !="") {
                    $("#produits").empty();
                    var content =  "<div class=\"row\">";
                    {% for p in produits %}
                    if ("{{ p.categorie }}".toLowerCase().includes($("#recherche").val().toLowerCase()) || "{{ p.description }}".toLowerCase().includes($("#recherche").val().toLowerCase()) || "{{ p.nom }}".toLowerCase().includes($("#recherche").val().toLowerCase()))
                        content +="<div class=\"col-md-6 col-lg-4 mb-4\">\n" +
                            "                    <a href=\"#\" class=\"unit-1 text-center\">\n" +
                            "                        <img  width=\"300\" height=\"300\" src=\""+"{{ asset('ressources/images/produit/'~p.image ) }}"+"\"  alt=\"Image\" class=\"img-fluid\">\n" +
                            "                        <div class=\"unit-1-text\">\n" +
                            "                            <h3 class=\"unit-1-heading\">"+"{{ p.nom }}"+"</h3>\n" +
                            "                            <p class=\"px-5\" style=\"margin-bottom: 80px\">"+"{{ p.prix }}"+"</p>\n" +
                            "                        </div>\n" +
                            "                    </a>\n" +
                            "                </div>"

                    {% endfor %}
                    content+="</div>";
                    $("#produits").append(content);
                }
                else {
                    $("#produits").empty();
                    var content =  "<div class=\"row\">";
                    {% for p in produits %}

                    content +="<div class=\"col-md-6 col-lg-4 mb-4\">\n" +
                        "                    <a href=\"#\" class=\"unit-1 text-center\">\n" +
                        "                        <img  width=\"300\" height=\"300\" src=\""+"{{ asset('ressources/images/produit/'~p.image ) }}"+"\"  alt=\"Image\" class=\"img-fluid\">\n" +
                        "                        <div class=\"unit-1-text\">\n" +
                        "                            <h3 class=\"unit-1-heading\">"+"{{ p.nom }}"+"</h3>\n" +
                        "                            <p class=\"px-5\" style=\"margin-bottom: 80px\">"+"{{ p.prix }}"+"</p>\n" +
                        "                        </div>\n" +
                        "                    </a>\n" +
                        "                </div>"

                    {% endfor %}
                    content+="</div>";
                    $("#produits").append(content);
                }

            });
        });
    </script>

{% endblock %}
{% block javascripts %}
    <script src="{{ asset('Bundles/AppBundle/js/jquery-3.3.1.min.js')}}"></script>
    <script src="{{ asset('Bundles/AppBundle/js/jquery-migrate-3.0.1.min.js')}}"></script>
    <script src="{{ asset('Bundles/AppBundle/js/jquery-ui.js')}}"></script>
    <script src="{{ asset('Bundles/AppBundle/js/popper.min.js')}}"></script>
    <script src="{{ asset('Bundles/AppBundle/js/bootstrap.min.js')}}"></script>
    <script src="{{ asset('Bundles/AppBundle/js/owl.carousel.min.js')}}"></script>
    <script src="{{ asset('Bundles/AppBundle/js/jquery.stellar.min.js')}}"></script>
    <script src="{{ asset('Bundles/AppBundle/js/jquery.countdown.min.js')}}"></script>
    <script src="{{ asset('Bundles/AppBundle/js/jquery.magnific-popup.min.js')}}"></script>
    <script src="{{ asset('Bundles/AppBundle/js/bootstrap-datepicker.min.js')}}"></script>
    <script src="{{ asset('Bundles/AppBundle/js/aos.js')}}"></script>
    <script src="{{ asset('Bundles/AppBundle/js/main.js')}}"></script>
{% endblock %}